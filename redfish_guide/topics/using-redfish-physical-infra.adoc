== Using {redfish-provider-full-title}

=== Examining {redfish-provider-title} Inventory

The physical infrastructure provider's dashboard provides an overview of the
inventory at a glance. To view it, first navigate to *Compute ->
Physical Infrastructure -> Providers* page from the main navigation on the
left, then click your {redfish-provider}.

image::docs_redfish_using01_dashboard.png[alt="{redfish-provider} dashboard",500,align="center"]

NOTE: The {redfish-provider} does not support targeted refreshing of the
inventory. To make sure that the latest information is visible, please perform
*Configuration -> Refresh Relationships and Power States*. The statuses should
be up-to-date after a few seconds.

To obtain a tabular view of the inventory, switch to the *Summary View* of the
{redfish-provider}'s dashboard:

image::docs_redfish_using02_dashboard_summary.png[alt="Summary view of {redfish-provider} dashboard",500,align="center"]

To view a list of the resources discovered through the inventory, click on
the respective row of the *Relationships* table. For example, clicking on
the *Physical Servers* row will take you to the list of physical servers:

image::docs_redfish_using12_server_list.png[alt="Summary view of all {redfish-provider} physical servers",450,align="center"]

A graphical representation of the managed data center can be displayed by
navigating to *Compute -> Physical Infrastructure -> Topology*:

image::docs_redfish_using11_topology.png[alt="Topology of {redfish-provider} entities in the inventory",450,align="center"]

=== Identifying physical systems

Many physical servers are equipped with a LED for identifying it as a specific
unit. Please use the server's documentation to locate it on the server's
chassis.

To identify a single system or a specific set of physical systems, we start by
making sure that all the LEDs are off. To do this, we visit *Compute -> Physical
Infrastructure -> Servers* from the navigation on the left. Here, we can see
from the *LED State* column the current states of the identifying LED for the
servers. To select all servers, we click on the *Select All* checkbox at the
bottom of the page. Now the *Identify* menu becomes active:

image::docs_redfish_using04_all_servers.png[alt="Identify menu and current state of the identify LED for the servers in the inventory",500,align="center"]

From the *Identify* menu, we click the *Turn Off LED*. We confirm the action
by clicking *OK* in the confirmation prompt that appears in the browser. Then
we should see the status showing the success of sending the request:

image::docs_redfish_using05_turn_off_led.png[alt="Confirmation of successfully requesting to turn off the LED",300,align="center"]

The LEDs on the servers should be off within a few seconds. To see the updated
status in the {product-gui}, use the *Configuration -> Refresh Relationships
and Power States*, wait a few seconds, then refresh the page in the browser.

image::docs_redfish_using06_refresh.png[alt="Refreshing the inventory status",200,align="center"]

To control the LED for an individual server, we can first click on the physical
server's name in the table. We obtain the physical server's summary view, which
provides the same *Identify* menu as before. Here, we can also see the state
of the identification LED:

image::docs_redfish_using03_identify.png[alt="Identify menu and current state of the identify LED",400,align="center"]

To make the server's identification LED blink, we click *Identify -> Blink
LED*. We get a prompt for confirming the action. After clicking *OK*, the
{product-gui} shows confirmation of the request sent. Shortly afterwards, the
selected server's LED should start blinking.

To see the status updated in the {product-gui}, we use the *Configuration ->
Refresh Relationships and Power States* function, then after a few seconds we
refresh the page in the browser.

Please refer to the <<ReleaseNotesRedfish>> section for further information
about the identify LED management actions and statuses.

=== Managing the Physical System's Power Status

Physical servers may be remotely powered off, powered on or restarted through
{product-gui} using {redfish-provider}.

To power off a particular physical server, we first navigate to *Compute ->
Physical Infrastructure -> Servers* from the navigation on the left. On the
server list, we click on the server's name. This takes us to the server's
summary page, which provides the *Power* menu and displays the server's
current power state:

image::docs_redfish_using08_server_power_on.png[alt="Power menu and current state of the power to the server",500,align="center"]

We can see that the server is currently powered on. To have it powered off, we
click on *Power -> Power Off Immediately*. We get a prompt to confirm the
selected action. After we click *Ok*, we will see the status showing the success
of sending the request:

image::docs_redfish_using09_turn_off_power.png[alt="Confirmation of successfully requesting to turn off the server immediately",300,align="center"]

The server should be powered off within a few seconds. To see the updated
status in the {product-gui}, use the *Configuration -> Refresh Relationships
and Power States*, wait a few seconds, then refresh the page in the browser.
Subject to server's vendor's {redfish} implementation, the power status should
cycle from *On* over *PoweringOff* to finally *Off*.

To turn on all the physical servers in a single batch operation, we visit
*Compute -> Physical Infrastructure -> Servers* from the navigation on
the left. Here, we can see from the *Power State* column the current states of
the power supply for the servers. To select all servers, we click on the *Select
All* checkbox at the bottom of the page. Now the *Power* menu becomes
active:

image::docs_redfish_using10_all_servers.png[alt="Power menu and current power state of the servers in the inventory"]

From the *Power* menu, we click the *Power On*. We confirm the action
by clicking *OK* in the confirmation prompt that appears in the browser. Then
we should see the status showing the success of sending the request.

The servers should be powered on within a few seconds. To see the updated
status in the {product-gui}, use the *Configuration -> Refresh Relationships
and Power States*, wait a few seconds, then refresh the page in the browser.
Again depending on the {redfish} implementation, the statuses will cycle from
*Off* to *PoweringOn* and finally to *On*.

Please refer to the <<ReleaseNotesRedfish>> section for further information
about the power management actions and statuses.

=== Physical Server Provisioning
{redfish-provider-full} lets the users request to initiate network booting of
an Operating System.

We start off by visiting the physical servers list in *Compute -> Physical
Infrastructure -> Servers*. On the server list, we check one or more checkboxes
to select the servers to be used in the provisioning request. This enables the
*Lifecycle* menu.

image::docs_redfish_using15_lifecycle_provisioning_menu.png[alt="Lifecycle menu for Provisioning Selected Physical Servers",350,align="center"]

Click the *Lifecycle -> Provision Selected Physical Servers*. This opens the
dialog for filling in the request.

image::docs_redfish_using16_provisioning_dialog_default.png[alt="Provision Selected Physical Servers dialog",350,align="center"]

NOTE: If from the server list, we click on a server, the we can initiate the
same dialog by clicking *Lifecycle -> Provision Physical Server* from the
Physical Server's summary

The dialog informs us on the number of servers selected for this request. It
presents the following fields that we need to fill:

* *PXE Server*: selection of the PXE servers registered in the
  {product-appliance}.
* *PXE Image*: pick a name of the Operating System image that the selected
  servers should be booted into.
* *Customization Template*: pick the name of the customization template to be
  applied at each selected server. The customization templates provide custom
  instructions used by the Operating System installers to perform unattended
  installation.

image::docs_redfish_using17_provisioning_dialog_example.png[alt="Provision Selected Physical Servers dialog - example",350,align="center"]

Send the request by clicking *Provision*.

Next, a privileged user of {product-appliance} has to approve the request. They
visit *Services -> Requests* and look for the request of type Physical Server
Provision and request status Pending.

image::docs_redfish_using18_requests_provisioning_pending.png[alt="Pending provisioning request on request list",500,align="center"]

They should open the request and click the Approve (the tick) button, then
provide text input to *Reason* and click *Submit*.

image::docs_redfish_using19_provisioning_request_approve.png[alt="Provisioning request approval",450,align="center"]

They will receive a pop-up showing that they have successfully approved the
request.

image::docs_redfish_using20_provisioning_request_approval_notification.png[alt="Provisioning request success docs_redfish_using20_provisioning_request_approval_notification",500,align="center"]

After a few minutes, we refresh the requests list and find that the
request state has changed to Provisioned.

image::docs_redfish_using21_provisioning_request_provisioned.png[alt="Provisioning request provisioned",500,align="center"]

NOTE: The {redfish-provider-full} currently has no means of knowing when the
provisioning has actually finished. Therefore, the status Provisioned indicates
that the {redfish-provider} has successfully configured the PXE server to serve
the selected image and customization template, has set the servers to boot once into network boot, and rebooted the servers. This initiates the actual process
of Operating System booting and installation, which then takes additional time
before it finishes.
